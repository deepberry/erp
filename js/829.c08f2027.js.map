{"version":3,"file":"js/829.c08f2027.js","mappings":"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","sources":["webpack://titan2/./src/views/account/role.vue","webpack://titan2/./src/components/account/AccountRoleErp.vue","webpack://titan2/./src/components/account/AccountRoleErp.vue?c6e0","webpack://titan2/./src/components/account/AccountRoleDevice.vue","webpack://titan2/./src/components/account/AccountRoleDevice.vue?79ec","webpack://titan2/./src/views/account/role.vue?6cb3"],"sourcesContent":["<template>\n    <div class=\"role\">\n        <div class=\"group\">\n            <p\n                v-for=\"(item, index) in groupList\"\n                @click=\"groupClick(index)\"\n                :class=\"{ active: index == currentGroupIndex }\"\n                :key=\"item.id\"\n            >\n                {{ item.name }}\n            </p>\n        </div>\n        <div class=\"content\">\n            <el-tabs v-model=\"activeTab\" @tab-click=\"tabClick\">\n                <el-tab-pane label=\"ERP模块权限\" name=\"erp\">\n                    <AccountRoleErp :id=\"currentGroupIndex\"></AccountRoleErp>\n                </el-tab-pane>\n                <el-tab-pane label=\"设备及其他权限\" name=\"device\">\n                    <AccountRoleDevice></AccountRoleDevice>\n                </el-tab-pane>\n            </el-tabs>\n        </div>\n    </div>\n</template>\n\n<script lang=\"js\">\nimport AccountRoleErp from '@/components/account/AccountRoleErp';\nimport AccountRoleDevice from '@/components/account/AccountRoleDevice'\nexport default {\n    name: \"role\",\n    components: {\n        AccountRoleErp, AccountRoleDevice\n    },\n    data (){\n        return {\n            groupList: [\n                {\n                    name: '管理员',\n                    id: 1\n                },\n                {\n                    name: '普通用户',\n                    id: 2\n                },\n            ],\n            currentGroupIndex: 0,\n            activeTab: 'erp',\n            userList: [],\n        }\n    },\n    methods: {\n        groupClick (index){\n            this.currentGroupIndex = index;\n        },\n        tabClick (v){\n\n        }\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.role {\n    width: calc(100% - 40px);\n    height: calc(100% - 40px);\n    padding: 20px;\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    .group {\n        width: 160px;\n        height: 100%;\n        padding: 0 10px;\n        background: #ffffff;\n        border-radius: 5px;\n        p {\n            color: #393939;\n            text-indent: 20px;\n            padding: 20px 0;\n            cursor: pointer;\n            border-bottom: 1px solid #f1f0f1;\n        }\n        p.active {\n            color: #1890ff;\n        }\n    }\n    .content {\n        width: calc(100% - 270px);\n        height: calc(100% - 4px);\n        padding: 20px 40px;\n        background: #ffffff;\n        border-radius: 5px;\n        .sss {\n            background: red;\n        }\n    }\n}\n</style>\n","<template>\n    <div class=\"roleErp\" v-loading=\"loading\">\n        <div class=\"box\">\n            <el-tree\n                :props=\"props\"\n                ref=\"tree\"\n                :data=\"list\"\n                node-key=\"id\"\n                default-expand-all\n                :default-checked-keys=\"showList\"\n                show-checkbox\n            />\n        </div>\n        <div class=\"btn\">\n            <el-button type=\"primary\" @click=\"save\" :loading=\"saving\">保存</el-button>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"roleErp\",\n    props: [\"id\"],\n    watch: {\n        id(v) {\n            this.roleId = v;\n            this.init(this);\n        },\n    },\n    data() {\n        return {\n            roleId: 0,\n            props: {\n                label: \"name\",\n                children: \"menuParentBoList\",\n            },\n            list: [],\n            loading: false,\n            showList: [],\n            saving: false,\n        };\n    },\n    mounted() {\n        this.init(this);\n    },\n    methods: {\n        init: async function (t) {\n            t.loading = true;\n            t.list = [];\n            t.showList = [];\n            let list = await t.getList();\n            let user = await t.getUserRole();\n\n            // 合并权限列表\n            let show = [];\n            list = list.map((i1) => {\n                user.map((u1) => {\n                    // 一级菜单\n                    if (i1.id == u1.id) {\n                        i1.menuParentBoList.map((i2) => {\n                            // 二级菜单\n                            u1.menuParentBoList.map((u2) => {\n                                if (i2.id == u2.id) {\n                                    i2.menuParentBoList.map((i3) => {\n                                        // 三级菜单，合并已选中权限\n                                        u2.menuParentBoList.map((u3) => {\n                                            if (i3.id == u3.id) {\n                                                show.push(i3.id);\n                                            }\n                                        });\n                                    });\n                                }\n                            });\n                        });\n                    }\n                });\n                return i1;\n            });\n            t.list = list;\n            t.showList = show;\n            t.loading = false;\n        },\n        // 获取菜单列表\n        getList() {\n            return new Promise((a, b) => {\n                this.ajax.post(\"/api/v1/adam/adminMenu/getMenuList\").then((r) => {\n                    let data = r.data.map((item) => {\n                        item.menuParentBoList = item.menuParentBoList.map((i) => {\n                            i.menuParentBoList = i.menuBoList;\n                            return i;\n                        });\n                        return item;\n                    });\n                    a(data);\n                });\n            });\n        },\n        // 获取当前用户的权限\n        getUserRole() {\n            return new Promise((a, b) => {\n                this.ajax\n                    .post(\"/api/v1/adam/adminMenu/getUserMenuList\", {\n                        roleId: this.roleId,\n                    })\n                    .then((r) => {\n                        let data = r.data.map((item) => {\n                            item.menuParentBoList = item.menuParentBoList.map((i) => {\n                                i.menuParentBoList = i.menuBoList;\n                                return i;\n                            });\n                            return item;\n                        });\n                        a(data);\n                    });\n            });\n        },\n        // 保存\n        save() {\n            this.saving = true;\n            this.ajax\n                .post(\"/api/v1/adam/adminMenu/saveUserMenu\", {\n                    menuIds: this.$refs.tree.getCheckedKeys().join(\",\"),\n                    roleId: this.roleId,\n                })\n                .then((r) => {\n                    this.saving = false;\n                    this.$message.success(\"保存成功\");\n                });\n        },\n    },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.roleErp {\n    width: 100%;\n    height: 700px;\n    .box {\n        width: 100%;\n        height: 600px;\n        overflow: auto;\n    }\n    .btn {\n        margin-top: 20px;\n        display: flex;\n        justify-content: flex-end;\n        align-items: flex-start;\n    }\n}\n</style>\n","import { render } from \"./AccountRoleErp.vue?vue&type=template&id=4e017876&scoped=true\"\nimport script from \"./AccountRoleErp.vue?vue&type=script&lang=js\"\nexport * from \"./AccountRoleErp.vue?vue&type=script&lang=js\"\n\nimport \"./AccountRoleErp.vue?vue&type=style&index=0&id=4e017876&lang=less&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/erp/erp/node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4e017876\"]])\n\nexport default __exports__","<template>\n    <div class=\"roleErp\">\n        <el-tree :props=\"props\" :data=\"list\" show-checkbox />\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"roleErp\",\n    data() {\n        return {\n            props: {\n                label: \"name\",\n                children: \"menuParentBoList\",\n            },\n            list: [],\n            role: [],\n        };\n    },\n};\n</script>\n","import { render } from \"./AccountRoleDevice.vue?vue&type=template&id=d5c3c7e4\"\nimport script from \"./AccountRoleDevice.vue?vue&type=script&lang=js\"\nexport * from \"./AccountRoleDevice.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/erp/erp/node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./role.vue?vue&type=template&id=20ddb974&scoped=true\"\nimport script from \"./role.vue?vue&type=script&lang=js\"\nexport * from \"./role.vue?vue&type=script&lang=js\"\n\nimport \"./role.vue?vue&type=style&index=0&id=20ddb974&lang=less&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/erp/erp/node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-20ddb974\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","_Fragment","_renderList","_ctx","item","index","onClick","active","key","id","name","_hoisted_3","_createVNode","_component_el_tabs","$event","onTabClick","_component_el_tab_pane","label","_component_AccountRoleErp","_component_AccountRoleDevice","_component_el_tree","props","$data","ref","data","_component_el_button","type","$options","loading","watch","v","this","roleId","init","children","list","showList","saving","mounted","methods","async","t","getList","user","getUserRole","show","map","i1","u1","menuParentBoList","i2","u2","i3","u3","push","Promise","a","b","ajax","post","then","r","i","menuBoList","save","menuIds","$refs","tree","getCheckedKeys","join","$message","success","__exports__","role","components","AccountRoleErp","AccountRoleDevice","groupList","currentGroupIndex","activeTab","userList","groupClick","tabClick","render"],"sourceRoot":""}