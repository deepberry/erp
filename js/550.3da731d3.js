"use strict";(self["webpackChunktitan2"]=self["webpackChunktitan2"]||[]).push([[550],{7550:function(t,e,a){a.r(e),a.d(e,{default:function(){return lt}});var l=a(6252),i=a(3577);const o=t=>((0,l.dD)("data-v-6becdaa8"),t=t(),(0,l.Cn)(),t),n={class:"stockPut inner"},s={class:"box"},r={class:"head"},u=o((()=>(0,l._)("i",{class:"erp erpfanhui",style:{"font-size":"14px","margin-right":"5px",position:"relative",top:"-1px"}},null,-1))),d=(0,l.Uk)(" 返回"),c=o((()=>(0,l._)("span",{style:{position:"relative",top:"2px","font-size":"15px"}},"出入库记录",-1))),p={class:"content"},g={class:"search"},m=(0,l.Uk)("查询"),h=(0,l.Uk)("出入库统计"),w={class:"list"},k=(0,l.Uk)("查看详情 "),y=o((()=>(0,l._)("i",{class:"erp erphtmal5icon45"},null,-1))),D={key:0,class:"pages"},_={class:"total"};function v(t,e){const a=(0,l.up)("el-button"),o=(0,l.up)("el-input"),v=(0,l.up)("el-pagination"),x=(0,l.up)("StockRecordDetail"),C=(0,l.up)("StockRecordStat"),b=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",s,[(0,l._)("div",r,[(0,l.Wm)(a,{link:"",type:"primary",onClick:t.back},{default:(0,l.w5)((()=>[u,d])),_:1},8,["onClick"]),c]),(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",p,[(0,l._)("div",g,[(0,l._)("div",null,[(0,l.Wm)(o,{style:{width:"360px"},modelValue:t.keyWord,"onUpdate:modelValue":e[0]||(e[0]=e=>t.keyWord=e),placeholder:"关键字搜索：农资名称、厂家名称、出入库日期"},null,8,["modelValue"]),(0,l.Wm)(a,{style:{"margin-left":"10px"},type:"primary",plain:"",onClick:t.getData},{default:(0,l.w5)((()=>[m])),_:1},8,["onClick"])]),(0,l._)("div",null,[(0,l.Wm)(a,{type:"primary",onClick:e[1]||(e[1]=e=>t.showStatBox=!0)},{default:(0,l.w5)((()=>[h])),_:1})])]),(0,l._)("div",w,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.list,((e,o)=>((0,l.wg)(),(0,l.iD)("div",{class:"item",key:o},[(0,l._)("div",null,[(0,l._)("p",null,(0,i.zw)(e.workTypeName),1),(0,l._)("p",{class:(0,i.C_)(0==e.type?"add":"minus")},(0,i.zw)(0==e.type?"+":"-")+(0,i.zw)(e.agriculturalCount)+(0,i.zw)(e.agriculturalBo.unitweight),3)]),(0,l._)("div",null,[(0,l._)("p",null,(0,i.zw)(e.agriculturalBo.title),1)]),(0,l._)("div",null,[(0,l._)("p",null,(0,i.zw)(e.agriculturalBo.manufacturers),1),(0,l._)("p",null,[t.$store.state.power.stockRecordDetail?((0,l.wg)(),(0,l.j4)(a,{key:0,type:"primary",link:"",onClick:a=>t.viewDetail(e.id)},{default:(0,l.w5)((()=>[k,y])),_:2},1032,["onClick"])):(0,l.kq)("",!0)])])])))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.space,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"item space",key:t+"-space"})))),128)),t.list.length>0?((0,l.wg)(),(0,l.iD)("div",D,[(0,l._)("span",_,"共 "+(0,i.zw)(t.total)+" 条",1),(0,l.Wm)(v,{currentPage:t.currentPage,"onUpdate:currentPage":e[2]||(e[2]=e=>t.currentPage=e),"page-size":t.pageSize,"onUpdate:page-size":e[3]||(e[3]=e=>t.pageSize=e),background:"",onCurrentChange:t.getData,layout:"prev, pager, next, jumper",total:t.total},null,8,["currentPage","page-size","onCurrentChange","total"])])):(0,l.kq)("",!0)])])),[[b,t.loading]])]),t.showDetailBox?((0,l.wg)(),(0,l.j4)(x,{key:0,id:t.detailId,onClose:t.onCloseDetailBox},null,8,["id","onClose"])):(0,l.kq)("",!0),t.showStatBox?((0,l.wg)(),(0,l.j4)(C,{key:1,onClose:t.onCloseStatBox},null,8,["onClose"])):(0,l.kq)("",!0)])}const x=t=>((0,l.dD)("data-v-1d0d514f"),t=t(),(0,l.Cn)(),t),C={class:"stockRecordDetail"},b={class:"stockRecordDetailInner"},f={class:"tag"},z=x((()=>(0,l._)("p",null,null,-1))),B={class:"item"},S={class:"unit"},W={class:"item"},$=x((()=>(0,l._)("p",null,"出入库类型：",-1))),T={class:"item"},L=x((()=>(0,l._)("p",null,"出入库时间：",-1))),I={class:"item"},N=x((()=>(0,l._)("p",null,"操作时间：",-1))),R={class:"item"},V=x((()=>(0,l._)("p",null,"操作人：",-1)));function U(t,e,a,o,n,s){const r=(0,l.up)("el-dialog"),u=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",C,[(0,l.Wm)(r,{"custom-class":"stockRecordDetail","before-close":s.onClose,"append-to-body":"",modelValue:n.showDetailBox,"onUpdate:modelValue":e[0]||(e[0]=t=>n.showDetailBox=t),title:"详情",width:"600px"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",b,[(0,l._)("div",null,[(0,l._)("p",null,(0,i.zw)(n.detail.agriculturalBo.title),1),(0,l._)("p",{class:(0,i.C_)(0==n.detail.type?"add":"minus")},(0,i.zw)(0==n.detail.type?"+":"-")+(0,i.zw)(n.detail.agriculturalCount)+(0,i.zw)(n.detail.agriculturalBo.unitweight),3)]),(0,l._)("div",null,[(0,l._)("p",null,[(0,l._)("span",f,(0,i.zw)(n.detail.agriculturalBo.agriculturalCategory),1)]),z]),(0,l._)("div",B,[(0,l._)("p",null,(0,i.zw)(n.detail.agriculturalBo.manufacturers),1),(0,l._)("p",S," 规格："+(0,i.zw)(n.detail.agriculturalBo.agriculturalCount)+(0,i.zw)(n.detail.agriculturalBo.unitweight)+"/"+(0,i.zw)(n.detail.agriculturalBo.unitmeasurement),1)]),(0,l._)("div",W,[$,(0,l._)("p",null,(0,i.zw)(n.detail.workTypeName),1)]),(0,l._)("div",T,[L,(0,l._)("p",null,(0,i.zw)(n.detail.outInTime),1)]),(0,l._)("div",I,[N,(0,l._)("p",null,(0,i.zw)(n.detail.workTime),1)]),(0,l._)("div",R,[V,(0,l._)("p",null,(0,i.zw)(n.detail.username),1)])])),[[u,n.detailLoading]])])),_:1},8,["before-close","modelValue"])])}var M={name:"stockRecordDetail",props:["id"],data(){return{detailLoading:!1,showDetailBox:!0,detail:{agriculturalBo:{}}}},mounted(){this.detailLoading=!0,this.ajax.post("/api/v1/adam/farmLand/outStorage-detail",{id:this.id}).then((t=>{this.detail=t.data,this.detailLoading=!1}))},methods:{onClose(){this.$emit("close",0),this.showDetailBox=!1}}},P=a(8118);const q=(0,P.Z)(M,[["render",U],["__scopeId","data-v-1d0d514f"]]);var j=q;const A={class:"stockRecordDetail"},Z={class:"stockRecordDetailInner"},H={class:"search"},Q=(0,l.Uk)("查询"),Y={class:"table"},F={key:0,class:"und"},K={key:1},E={key:0,class:"und"},G={key:1};function J(t,e,a,o,n,s){const r=(0,l.up)("el-input"),u=(0,l.up)("el-button"),d=(0,l.up)("el-table-column"),c=(0,l.up)("el-table"),p=(0,l.up)("el-dialog"),g=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",A,[(0,l.Wm)(p,{"custom-class":"stockRecordDetail","before-close":s.onClose,"append-to-body":"",modelValue:n.showDetailBox,"onUpdate:modelValue":e[1]||(e[1]=t=>n.showDetailBox=t),title:"出入库统计",width:"700px"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",Z,[(0,l._)("div",H,[(0,l.Wm)(r,{style:{width:"360px"},modelValue:n.keyWord,"onUpdate:modelValue":e[0]||(e[0]=t=>n.keyWord=t),placeholder:"关键字搜索：农资名称"},null,8,["modelValue"]),(0,l.Wm)(u,{type:"primary",plain:"",style:{"margin-left":"10px"},onClick:s.getData},{default:(0,l.w5)((()=>[Q])),_:1},8,["onClick"])]),(0,l._)("div",Y,[(0,l.Wm)(c,{size:"large",data:n.list,"max-height":"500"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{prop:"agriculturalBo.title",label:"农资名称",width:"200"}),(0,l.Wm)(d,{prop:"agriculturalBo.manufacturers",width:"260",label:"生产厂家"}),(0,l.Wm)(d,{label:"入库量"},{default:(0,l.w5)((t=>[t.row.inAgriculturalCount?((0,l.wg)(),(0,l.iD)("span",F,(0,i.zw)(t.row.inAgriculturalCount)+(0,i.zw)(t.row.agriculturalBo.unitweight),1)):(0,l.kq)("",!0),t.row.inAgriculturalCount?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("span",K,"-"))])),_:1}),(0,l.Wm)(d,{label:"出库量"},{default:(0,l.w5)((t=>[t.row.outAgriculturalCount?((0,l.wg)(),(0,l.iD)("span",E,(0,i.zw)(t.row.outAgriculturalCount)+(0,i.zw)(t.row.agriculturalBo.unitweight),1)):(0,l.kq)("",!0),t.row.outAgriculturalCount?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("span",G,"-"))])),_:1})])),_:1},8,["data"])])])),[[g,n.detailLoading]])])),_:1},8,["before-close","modelValue"])])}var O={name:"stockRecordDetail",props:["id"],data(){return{list:[],detailLoading:!1,showDetailBox:!0,keyWord:""}},mounted(){this.getData()},methods:{getData(){this.detailLoading=!0,this.ajax.post("/api/v1/adam/farmLand/outInStorageCount",{endTime:"",id:0,keyWord:this.keyWord,startTime:""}).then((t=>{this.list=t.data,this.detailLoading=!1}))},onClose(){this.$emit("close",0),this.showDetailBox=!1}}};const X=(0,P.Z)(O,[["render",J],["__scopeId","data-v-2b72c62e"]]);var tt=X,et=(a(2335),{name:"stockRecord",data(){return{note:"",list:[],space:0,showDetailBox:!1,showStatBox:!1,currentPage:1,pageSize:12,total:2,loading:!1,detailId:0,keyWord:""}},mounted(){this.space=3-this.list%3,this.getData()},components:{StockRecordDetail:j,StockRecordStat:tt},methods:{getData(){this.loading=!0,this.ajax.post("/api/v1/adam/farmLand/outInStorage-list",{pageNum:this.currentPage,pageSize:12,param:{endTime:"",id:0,keyWord:this.keyWord,startTime:""}}).then((t=>{this.list=t.data,this.currentPage=t.pageNum,this.pageSize=t.pageSize,this.total=t.total,this.loading=!1}))},back(){this.$router.push("/erp/stock")},onCloseDetailBox(){let t=setTimeout((()=>{this.showDetailBox=!1,clearTimeout(t)}),500)},onCloseStatBox(){let t=setTimeout((()=>{this.showStatBox=!1,clearTimeout(t)}),500)},viewDetail(t){this.showDetailBox=!0,this.detailId=t}}});const at=(0,P.Z)(et,[["render",v],["__scopeId","data-v-6becdaa8"]]);var lt=at},2335:function(t,e){const a={to2:t=>Number(t)<10?`0${Number(t)}`:String(t),time(t="y-m-d",e=null){let a=e?new Date(e):new Date;return t=t.replace("y",a.getFullYear()),t=t.replace("m",this.to2(a.getMonth()+1)),t=t.replace("d",this.to2(a.getDate())),t=t.replace("h",this.to2(a.getHours())),t=t.replace("i",this.to2(a.getMinutes())),t=t.replace("s",this.to2(a.getSeconds())),t=t.replace("w",a.getDay()),t},monthLength(t=null){let e=1*this.time("y",t),a=this.to2(1*this.time("m",t)+1);if(13==a)return 31;{let t=new Date(`${e}-${a}-01`).getTime()-864e5;return Number(this.time("d",t))}},preMonthLenggth(t=null){let e=1*this.time("y",t),a=this.to2(1*this.time("m",t)),l=new Date(`${e}-${a}-01`).getTime()-864e5;return Number(this.time("d",l))},nextMonthLenggth(t=null){let e=1*this.time("y",t),a=this.to2(1*this.time("m",t)+2),l=new Date(`${e}-${a}-01`).getTime()-864e5;return Number(this.time("d",l))},monthFirst(t=null){let e=this.time("y-m",t)+"-01";return this.time("y-m-d",e)},monthLast(t=null){let e=1*this.time("y",t),a=this.to2(1*this.time("m",t)+1),l=new Date(`${e}-${a}-01`).getTime()-864e5;return this.time("y-m-d",l)},preMonthToday(t=null){let e=Number(t.substr(0,4)),a=Number(t.substr(5,2)),l=Number(t.substr(8));return l>this.preMonthLenggth(`{y}-${a}-01`)&&(l=this.preMonthLenggth(`{y}-${a}-01`)),1==a?(e-=1,a=12):a-=1,`${e}-${a}-${l}`},nextMonthToday(t=null){let e=Number(t.substr(0,4)),a=Number(t.substr(5,2)),l=Number(t.substr(8));return l>this.nextMonthLenggth(`{y}-${a}-01`)&&(l=this.nextMonthLenggth(`{y}-${a}-01`)),12==a?(e+=1,a=1):a+=1,`${e}-${a}-${l}`},timeout(t){},timeRemaining(t,e){return e-=parseInt((new Date).getTime()/1e3),this.unixToString(t,e)},unixToString(t,e){let l=parseInt(e/60/60/24),i=parseInt((e-86400*l)/3600),o=parseInt((e-86400*l-3600*i)/60),n=e-86400*l-3600*i-60*o;return t=t.replace("d",a.to2(a.low(l))),t=t.replace("h",a.to2(a.low(i))),t=t.replace("i",a.to2(a.low(o))),t=t.replace("s",a.to2(a.low(n))),t},low(t){return t<0?0:t},parse(t){return new Date(t)}};e["Z"]=a}}]);
//# sourceMappingURL=550.3da731d3.js.map