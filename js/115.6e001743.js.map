{"version":3,"file":"js/115.6e001743.js","mappings":"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","sources":["webpack://titan2/./src/components/purchase/PurchaseCar.vue","webpack://titan2/./src/utils/tools.js","webpack://titan2/./src/components/purchase/PurchaseCar.vue?fbcc","webpack://titan2/./src/components/purchase/PurchaseShop.vue","webpack://titan2/./src/components/purchase/PurchaseShop.vue?bd61"],"sourcesContent":["<template>\n    <div class=\"purchaseDetailBox\">\n        <el-dialog\n            custom-class=\"purchaseDetailBox\"\n            :before-close=\"onClose\"\n            append-to-body\n            v-model=\"showCarBox\"\n            title=\"购物车\"\n            width=\"900px\"\n        >\n            <div v-loading=\"carLoading\" class=\"purchaseDetailBoxInner\">\n                <el-table\n                    size=\"large\"\n                    ref=\"table\"\n                    @select=\"select\"\n                    @select-all=\"select\"\n                    :data=\"list\"\n                    style=\"width: 100%\"\n                >\n                    <el-table-column type=\"selection\" width=\"40\" />\n                    <el-table-column prop=\"agriculturalBo.title\" label=\"农资名称\" show-overflow-tooltip />\n                    <el-table-column\n                        prop=\"agriculturalBo.agriculturalCategory\"\n                        label=\"农资类型\"\n                        show-overflow-tooltip\n                    />\n                    <el-table-column prop=\"agriculturalBo.manufacturers\" label=\"生产厂家\" show-overflow-tooltip />\n                    <el-table-column label=\"规格\" width=\"140\">\n                        <template #default=\"scope\">\n                            ({{\n                                scope.row.agriculturalBo.agriculturalCount +\n                                scope.row.agriculturalBo.unitweight +\n                                \"/\" +\n                                scope.row.agriculturalBo.unitmeasurement\n                            }})\n                        </template>\n                    </el-table-column>\n                    <el-table-column width=\"120\" label=\"价格\" show-overflow-tooltip>\n                        <template #default=\"scope\"> ￥{{ scope.row.agriculturalBo.agriculturalPrice }} </template>\n                    </el-table-column>\n                    <el-table-column width=\"120\" label=\"数量\" show-overflow-tooltip>\n                        <template #default=\"scope\">\n                            <el-input\n                                type=\"number\"\n                                v-model=\"scope.row.unit\"\n                                style=\"width: 60px\"\n                                size=\"small\"\n                                placeholder=\"数量\"\n                                @blur=\"resetCarCount(scope.row)\"\n                            />\n                            {{ scope.row.agriculturalBo.unitmeasurement }}\n                        </template>\n                    </el-table-column>\n                </el-table>\n                <div class=\"bottom\">\n                    <div>合计：</div>\n                    <div>\n                        <p v-for=\"item in totalList\" :key=\"item.title\">\n                            <span>{{ item.title }}</span>\n                            <span>{{ item.num }}{{ item.unit }}</span>\n                        </p>\n                        <p>\n                            <span>总价</span>\n                            <span>￥{{ allPrice }}.00元</span>\n                        </p>\n                    </div>\n                </div>\n                <div class=\"buttons\">\n                    <el-button type=\"primary\" round plain @click=\"showServer\">联系客服</el-button>\n                    <el-button\n                        type=\"primary\"\n                        @click=\"submit\"\n                        :loading=\"submitting\"\n                        v-if=\"$store.state.power.submitShoppingOrderBtn\"\n                        >提交订单</el-button\n                    >\n                </div>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport tools from \"@/utils/tools.js\";\nexport default {\n    name: \"purchaseOrderCar\",\n    props: [\"id\"],\n    data() {\n        return {\n            list: [],\n            selected: [],\n            showCarBox: true, // 是否显示详情弹窗\n            detail: {}, // 详情数据,\n            carLoading: false, // 详情数据加载状态\n            totalList: [],\n            submitting: false,\n        };\n    },\n    computed: {\n        allPrice() {\n            let num = 0;\n            this.selected.map((item) => {\n                num += item.agriculturalBo.agriculturalPrice * item.unit;\n            });\n            return num;\n        },\n    },\n    watch: {\n        allPrice() {\n            this.totalList = tools.total(this.selected, \"agriculturalBo.title\");\n            this.totalList = this.totalList.map((item) => {\n                this.list.map((i) => {\n                    if (i.agriculturalBo.title == item.title) {\n                        item.unit = i.agriculturalBo.unitweight;\n                    }\n                });\n                return item;\n            });\n        },\n    },\n    mounted() {\n        this.getCar();\n    },\n    methods: {\n        // 选择行\n        select(row) {\n            console.log(row);\n            this.selected = row;\n        },\n        // 获取购物车列表\n        getCar() {\n            this.carLoading = true;\n            this.ajax\n                .post(\"/api/v1/adam/agricultural/cart\", {\n                    pageNum: 0,\n                    pageSize: 0,\n                    param: {\n                        keyWord: \"\",\n                        orderStatus: 0,\n                    },\n                })\n                .then((r) => {\n                    let list = [];\n                    r.data.map((item) => {\n                        if (item.unit > 0) list.push(item);\n                    });\n                    this.list = list;\n                    this.carLoading = false;\n                });\n        },\n        onClose() {\n            this.$emit(\"closeCarBox\", 0);\n            this.showCarBox = false;\n        },\n        showServer() {\n            this.$alert(\"客服电话：13606870818\", \"联系客服\");\n        },\n        // 更新购物车数量\n        resetCarCount(v) {\n            this.ajax.post(\"/api/v1/adam/agricultural/cart-update\", {\n                agriculturalId: v.agriculturalBo.id,\n                id: v.id,\n                unit: v.unit,\n            });\n        },\n        submit() {\n            let t = this;\n            if (t.$refs.table.getSelectionRows().length == 0) {\n                t.$message.warning(\"请选择农资\");\n                return;\n            }\n            let totalCount = [];\n            let orderCartBoList = t.$refs.table.getSelectionRows().map((item) => {\n                totalCount.push({\n                    agriculturalCos: item.agriculturalBo.agriculturalCount * item.agriculturalBo.agriculturalPrice,\n                    id: item.agriculturalBo.agriculturalCategoryId,\n                    title: item.agriculturalBo.title,\n                    unitweight: item.agriculturalBo.agriculturalCount,\n                });\n                return {\n                    agriculturalId: item.agriculturalBo.id,\n                    id: item.id,\n                    unit: item.unit,\n                };\n            });\n            t.submitting = true;\n            t.ajax\n                .post(\"/api/v1/adam/agricultural/saveOrder\", {\n                    orderCartBoList,\n                    orderCos: t.allPrice,\n                    totalCount,\n                })\n                .then((r) => {\n                    t.submitting = false;\n                    if (r.code == 200) {\n                        t.$message.success(\"提交成功\");\n                        t.onClose();\n                    } else {\n                        t.$message.error(r.message);\n                    }\n                });\n        },\n    },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url(\"@/assets/css/purchase.order.less\");\n</style>\n","/**\n * 工具库\n */\nexport default {\n    // 合并相同类型的数据，data = 数据源，tag = 按标签合并\n    total(data, tagBy) {\n        // 列出所有标签，去重\n        let tags = data.map((item) => {\n            return this.findAttr(item, tagBy);\n        });\n        let tagsSet = Array.from(new Set(tags));\n\n        // 合并数据\n        let result = tagsSet.map((tag) => {\n            let rows = {\n                title: tag,\n                num: 0,\n            };\n            data.map((item) => {\n                if (this.findAttr(item, tagBy) == tag) {\n                    rows.num += item.agriculturalBo.agriculturalCount * item.unit;\n                }\n            });\n            return rows;\n        });\n\n        return result;\n    },\n    // 多层属性查源\n    findAttr(object, string) {\n        let tags = string.split(\".\");\n        let tagsCopy = JSON.parse(JSON.stringify(tags));\n        tagsCopy.map((item) => {\n            object = object[tags[0]];\n            tags.shift();\n        });\n        return object;\n    },\n};\n","import { render } from \"./PurchaseCar.vue?vue&type=template&id=58a7a463&scoped=true\"\nimport script from \"./PurchaseCar.vue?vue&type=script&lang=js\"\nexport * from \"./PurchaseCar.vue?vue&type=script&lang=js\"\n\nimport \"./PurchaseCar.vue?vue&type=style&index=0&id=58a7a463&lang=less&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/erp/erp/node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-58a7a463\"]])\n\nexport default __exports__","<template>\n    <div class=\"purchaseOrder\" v-loading=\"loading\">\n        <div class=\"ctrl\">\n            <div class=\"search\">\n                <div>\n                    <el-input\n                        v-model=\"searchKey\"\n                        class=\"searchInput\"\n                        placeholder=\"关键词搜索：农资类型、农资名称、厂家名称\"\n                    ></el-input>\n                    <el-button type=\"primary\" class=\"searchSubmit\" @click=\"getData\">查询</el-button>\n                </div>\n                <div>\n                    <el-button\n                        v-if=\"$store.state.power.shoppingCartBtn\"\n                        @click=\"showCar\"\n                        type=\"primary\"\n                        class=\"searchCreateNewTask\"\n                        plain\n                        ><i class=\"erp erpgouwuche\"></i> 购物车</el-button\n                    >\n                </div>\n            </div>\n        </div>\n        <div class=\"tableWrap\">\n            <div class=\"table\">\n                <el-table size=\"large\" :data=\"list\" style=\"width: 100%\" max-height=\"600px\">\n                    <el-table-column prop=\"title\" label=\"农资名称\" show-overflow-tooltip></el-table-column>\n                    <el-table-column prop=\"agriculturalCategory\" label=\"农资类型\"></el-table-column>\n                    <el-table-column label=\"规格\">\n                        <template #default=\"scope\">\n                            {{ scope.row.agriculturalCount + scope.row.unitweight + \"/\" + scope.row.unitmeasurement }}\n                        </template>\n                    </el-table-column>\n                    <el-table-column prop=\"manufacturers\" label=\"厂家\" show-overflow-tooltip></el-table-column>\n                    <el-table-column label=\"参考单价\">\n                        <template #default=\"scope\">\n                            <span style=\"color: rgba(224, 29, 29, 1)\">￥{{ scope.row.agriculturalPrice }}.00元</span>\n                        </template>\n                    </el-table-column>\n                    <el-table-column label=\"操作\" width=\"180\">\n                        <template #default=\"scope\">\n                            <el-button\n                                link\n                                type=\"primary\"\n                                v-if=\"$store.state.power.materialsPurchaseDetail\"\n                                @click=\"viewDetail(scope.row.id)\"\n                                >查看详情</el-button\n                            >\n                        </template>\n                    </el-table-column>\n                </el-table>\n                <div class=\"pages\" v-if=\"list.length > 0\">\n                    <span class=\"total\">共 {{ total }} 条</span>\n                    <el-pagination\n                        v-model:currentPage=\"currentPage\"\n                        v-model:page-size=\"pageSize\"\n                        background\n                        layout=\"prev, pager, next, jumper\"\n                        :total=\"total\"\n                    />\n                </div>\n            </div>\n        </div>\n        <PurchaseCar v-if=\"showCarBox\" @closeCarBox=\"closeCarBox\"></PurchaseCar>\n    </div>\n</template>\n\n<script lang=\"js\">\nimport PurchaseCar from '@/components/purchase/PurchaseCar.vue';\nexport default {\n    name: 'purchaseOrder',\n    components: {\n        PurchaseCar\n    },\n    data (){\n        return {\n            loading: false,\n            searchKey: \"\", // 搜索关键词\n            list: [], // 数据列表\n            currentPage: 0,\n            pageSize: 0,\n            total: 0,\n            showCarBox: false,\n        }\n    },\n    mounted() {\n        this.getData();\n    },\n    methods: {\n        // 获取数据列表\n        getData (){\n            this.loading = true;\n            this.ajax.post('/api/v1/adam/agricultural/platform-list', {\n                \"pageNum\": this.currentPage,\n                \"pageSize\": 10,\n                \"param\": {\n                    \"keyWord\": this.searchKey,\n                    \"orderStatus\": -1\n                }\n            }).then(r => {\n                console.log(r)\n                this.list = r.data.map(item => {\n                    let status = '';\n                    let color = '';\n                    switch (item.orderStatus) {\n                        case 0: status = '已提交'; color = '#1890FF'; break;\n                        case 1: status = '已完成'; color = '#0DD71C'; break;\n                        case 2: status = '已关闭'; color = '#A8A8A8'; break;\n                    }\n                    item.orderStatus = status;\n                    item.orderStatusColor = color;\n                    return item;\n                })\n                this.currentPage = r.pageNum;\n                this.pageSize = r.pageSize;\n                this.total = r.total;\n                this.loading = false;\n            })\n        },\n        // 查看详情\n        viewDetail (id){\n            this.$router.push({\n                path: '/erp/purchase/shop/detail',\n                query: {\n                    id\n                }\n            });\n        },\n        // 打开购物车\n        showCar (id){\n            this.showCarBox = true;\n        },\n        // 关闭购物车\n        closeCarBox (){\n            let timer = setTimeout(() => {\n                this.showCarBox = false;\n                clearTimeout(timer);\n            }, 500);\n        }\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.ctrl {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 20px;\n    .status {\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n        position: relative;\n        left: -20px;\n        .statusItem {\n            margin: 0 20px;\n        }\n    }\n    .search {\n        width: 100%;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        .searchInput {\n            width: 360px;\n        }\n        .searchSubmit {\n            margin-left: 10px;\n        }\n        .searchCreateNewTask {\n            margin-left: 30px;\n            i {\n                font-size: 14px;\n                margin-right: 5px;\n            }\n        }\n        .searchSelect {\n            margin-left: 20px;\n            width: 120px;\n        }\n    }\n}\n.tableWrap {\n    width: calc(100% - 40px);\n    padding: 0 20px;\n    .table {\n        width: 100%;\n        .pages {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            padding: 30px 0;\n            .total {\n                color: #a0a0a0;\n                margin-right: 10px;\n            }\n        }\n    }\n}\n</style>\n","import { render } from \"./PurchaseShop.vue?vue&type=template&id=672b0326&scoped=true\"\nimport script from \"./PurchaseShop.vue?vue&type=script&lang=js\"\nexport * from \"./PurchaseShop.vue?vue&type=script&lang=js\"\n\nimport \"./PurchaseShop.vue?vue&type=style&index=0&id=672b0326&lang=less&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/erp/erp/node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-672b0326\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_createVNode","_component_el_dialog","$options","$data","$event","title","width","_component_el_table","size","ref","onSelect","onSelectAll","data","style","_component_el_table_column","type","prop","label","default","scope","_toDisplayString","row","agriculturalBo","agriculturalCount","unitweight","unitmeasurement","agriculturalPrice","_component_el_input","unit","placeholder","onBlur","_hoisted_4","_Fragment","_renderList","item","key","num","_hoisted_5","_component_el_button","round","plain","onClick","_ctx","state","power","submitShoppingOrderBtn","_createBlock","loading","total","tagBy","tags","map","this","findAttr","tagsSet","Array","from","Set","result","tag","rows","object","string","split","tagsCopy","JSON","parse","stringify","shift","name","props","list","selected","showCarBox","detail","carLoading","totalList","submitting","computed","allPrice","watch","tools","i","mounted","getCar","methods","select","console","log","ajax","post","pageNum","pageSize","param","keyWord","orderStatus","then","r","push","onClose","$emit","showServer","$alert","resetCarCount","v","agriculturalId","id","submit","t","$refs","table","getSelectionRows","length","$message","warning","totalCount","orderCartBoList","agriculturalCos","agriculturalCategoryId","orderCos","code","success","error","message","__exports__","render","shoppingCartBtn","materialsPurchaseDetail","link","_component_el_pagination","currentPage","background","layout","_component_PurchaseCar","onCloseCarBox","components","PurchaseCar","searchKey","getData","status","color","orderStatusColor","viewDetail","$router","path","query","showCar","closeCarBox","timer","setTimeout","clearTimeout"],"sourceRoot":""}