"use strict";(self["webpackChunktitan2"]=self["webpackChunktitan2"]||[]).push([[154],{1154:function(e,t,a){a.r(t),a.d(t,{default:function(){return Oe}});var l=a(6252),s=a(3577);const i=e=>((0,l.dD)("data-v-79fbbd7c"),e=e(),(0,l.Cn)(),e),n={class:"task inner"},o={class:"box"},r=i((()=>(0,l._)("div",{class:"head"},[(0,l._)("span",{class:"active"},"任务列表")],-1))),d={class:"ctrl"},u={class:"status"},c={class:"search"},p=(0,l.Uk)("查询"),m=i((()=>(0,l._)("i",{class:"erp erpjiufuqianbaoicon06"},null,-1))),h=(0,l.Uk)(" 创建任务"),g={class:"tableWrap"},w={class:"table"},k=(0,l.Uk)("查看详情"),v={key:0,class:"pages"},_={class:"total"};function y(e,t,a,i,y,D){const f=(0,l.up)("el-button"),x=(0,l.up)("el-badge"),b=(0,l.up)("el-input"),C=(0,l.up)("el-table-column"),T=(0,l.up)("el-table"),B=(0,l.up)("el-pagination"),U=(0,l.up)("TaskDetail"),z=(0,l.up)("TaskCreate"),W=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",o,[r,(0,l._)("div",d,[(0,l._)("div",u,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(y.status,(e=>((0,l.wg)(),(0,l.j4)(x,{class:"statusItem",value:e.sup>0?e.sup:"",onClick:t=>D.statusClick(e.value),key:e.value},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{type:y.currentStatus==e.value?"primary":"",link:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.title),1)])),_:2},1032,["type"])])),_:2},1032,["value","onClick"])))),128))]),(0,l._)("div",c,[(0,l.Wm)(b,{modelValue:y.searchKey,"onUpdate:modelValue":t[0]||(t[0]=e=>y.searchKey=e),class:"searchInput",placeholder:"关键词搜索：任务内容、检查建议..."},null,8,["modelValue"]),(0,l.Wm)(f,{type:"primary",class:"searchSubmit",onClick:D.getData,loading:y.searchLoading},{default:(0,l.w5)((()=>[p])),_:1},8,["onClick","loading"]),e.$store.state.power.createTaskBtn?((0,l.wg)(),(0,l.j4)(f,{key:0,type:"primary",class:"searchCreateNewTask",onClick:t[1]||(t[1]=e=>y.showCreateBox=!0)},{default:(0,l.w5)((()=>[m,h])),_:1})):(0,l.kq)("",!0)])]),(0,l._)("div",g,[(0,l._)("div",w,[(0,l.wy)(((0,l.wg)(),(0,l.j4)(T,{size:"large",data:y.list,style:{width:"100%"},"max-height":"600px"},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{label:"任务单号",width:"150","show-overflow-tooltip":""},{default:(0,l.w5)((e=>[(0,l.Uk)(" RW"+(0,s.zw)(e.row.id),1)])),_:1}),(0,l.Wm)(C,{label:"所属棚区",width:"300","show-overflow-tooltip":""},{default:(0,l.w5)((e=>[(0,l.Uk)((0,s.zw)(e.row.gardenTitle)+"-"+(0,s.zw)(e.row.growPlantTitle)+"-"+(0,s.zw)(e.row.address),1)])),_:1}),(0,l.Wm)(C,{label:"执行人"},{default:(0,l.w5)((e=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.row.executors,(e=>((0,l.wg)(),(0,l.iD)("p",{key:e.id},(0,s.zw)(e.name),1)))),128))])),_:1}),(0,l.Wm)(C,{prop:"taskContent",label:"任务内容"}),(0,l.Wm)(C,{label:"状态",width:"200"},{default:(0,l.w5)((e=>[(0,l._)("span",{style:(0,s.j5)({color:e.row.color})},(0,s.zw)(e.row.statusText),5)])),_:1}),(0,l.Wm)(C,{label:"操作",width:"200"},{default:(0,l.w5)((t=>[e.$store.state.power.taskDetail?((0,l.wg)(),(0,l.j4)(f,{key:0,link:"",type:"primary",onClick:e=>D.showDetail(t.row.id)},{default:(0,l.w5)((()=>[k])),_:2},1032,["onClick"])):(0,l.kq)("",!0)])),_:1})])),_:1},8,["data"])),[[W,y.loading]]),y.list.length>0?((0,l.wg)(),(0,l.iD)("div",v,[(0,l._)("span",_,"共 "+(0,s.zw)(y.total)+" 条",1),(0,l.Wm)(B,{currentPage:y.currentPage,"onUpdate:currentPage":t[2]||(t[2]=e=>y.currentPage=e),"page-size":y.pageSize,"onUpdate:page-size":t[3]||(t[3]=e=>y.pageSize=e),onCurrentChange:D.getData,background:"",layout:"prev, pager, next, jumper",total:y.total},null,8,["currentPage","page-size","onCurrentChange","total"])])):(0,l.kq)("",!0)])])]),y.showDetailBox?((0,l.wg)(),(0,l.j4)(U,{key:0,id:y.currentId,onOnCloseDetail:D.onCloseDetail},null,8,["id","onOnCloseDetail"])):(0,l.kq)("",!0),y.showCreateBox?((0,l.wg)(),(0,l.j4)(z,{key:1,onOnCloseCreate:D.onCloseCreate},null,8,["onOnCloseCreate"])):(0,l.kq)("",!0)])}var D=a(8090),f=a(7795),x=a(7913),b=a(9536);const C=e=>((0,l.dD)("data-v-3991b626"),e=e(),(0,l.Cn)(),e),T={class:"taskDetail purchaseDetailBox"},B={class:"taskDetailInner purchaseDetailBoxInner"},U={key:0,class:"statusImg",src:D,alt:""},z={key:1,class:"statusImg",src:f,alt:""},W={key:2,class:"statusImg",src:x,alt:""},$={key:3,class:"statusImg",src:b,alt:""},V={class:"id wrap"},L={class:"create wrap"},I=C((()=>(0,l._)("div",null,"任务创建",-1))),P=C((()=>(0,l._)("div",null,"任务内容",-1))),j={class:"taskContent"},q=C((()=>(0,l._)("p",null,"操作视频：",-1))),N=["src"],S=(0,l.Uk)(" 指定执行人："),Y={key:4,class:"todo wrap"},R=C((()=>(0,l._)("div",null,"任务执行",-1))),M={class:"todoContent"},G={class:"a"},K={key:5,class:"todo wrap"},A=C((()=>(0,l._)("div",null,"任务检查",-1))),F=C((()=>(0,l._)("div",null,"检查意见：",-1))),O={class:"todoContent"},H={style:{display:"block"}},Z=C((()=>(0,l._)("i",{class:"erp erptianxie",style:{"margin-right":"5px","font-size":"12px"}},null,-1))),J=(0,l.Uk)(" 填写检查意见"),Q={key:7,class:"form wrap"},E=C((()=>(0,l._)("div",null,"填写检查意见",-1))),X=(0,l.Uk)(" 是否合格： "),ee=(0,l.Uk)("合格"),te=(0,l.Uk)("不合格"),ae={class:"formTextarea"},le=C((()=>(0,l._)("p",null,"意见建议：",-1))),se={key:8,class:"btns"},ie=(0,l.Uk)("取消"),ne=(0,l.Uk)("确定");function oe(e,t,a,i,n,o){const r=(0,l.up)("el-button"),d=(0,l.up)("el-radio"),u=(0,l.up)("el-radio-group"),c=(0,l.up)("el-input"),p=(0,l.up)("el-dialog"),m=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",T,[(0,l.Wm)(p,{"custom-class":"taskDetail purchaseDetailBox","before-close":o.onClose,"append-to-body":"",modelValue:n.showDetailBox,"onUpdate:modelValue":t[5]||(t[5]=e=>n.showDetailBox=e),title:"任务详情",width:"700px"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",B,[0==n.detail.status?((0,l.wg)(),(0,l.iD)("img",U)):(0,l.kq)("",!0),1==n.detail.status?((0,l.wg)(),(0,l.iD)("img",z)):(0,l.kq)("",!0),2==n.detail.status?((0,l.wg)(),(0,l.iD)("img",W)):(0,l.kq)("",!0),3==n.detail.status?((0,l.wg)(),(0,l.iD)("img",$)):(0,l.kq)("",!0),(0,l._)("div",V,"任务单号：RW"+(0,s.zw)(n.detail.id),1),(0,l._)("div",L,[I,(0,l._)("div",null,[(0,l._)("p",null,"创建人："+(0,s.zw)(n.detail.createUserName),1),(0,l._)("p",null,"创建时间："+(0,s.zw)(n.detail.createTime),1)]),P,(0,l._)("div",j,[(0,l._)("div",null,[(0,l._)("p",null,"园区："+(0,s.zw)(n.detail.gardenTitle),1),(0,l._)("p",null,"作物："+(0,s.zw)(n.detail.growPlantTitle)+"-"+(0,s.zw)(n.detail.address),1)]),(0,l._)("div",null,[(0,l._)("p",null,"内容："+(0,s.zw)(n.detail.taskContent),1),(0,l._)("div",null,[q,(0,l._)("video",{controls:"",onClick:t[0]||(t[0]=e=>o.view(n.detail.reWire)),src:n.detail.reWire,alt:""},null,8,N)])])]),(0,l._)("div",null,[(0,l._)("p",null,[S,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.detail.executors,(e=>((0,l.wg)(),(0,l.iD)("span",{style:{margin:"0 5px"},key:e.id},(0,s.zw)(e.name),1)))),128))])]),(0,l._)("div",null,"开始时间："+(0,s.zw)(n.detail.startTime),1),(0,l._)("div",null,"截止时间："+(0,s.zw)(n.detail.endTime),1)]),0!=n.detail.status?((0,l.wg)(),(0,l.iD)("div",Y,[R,(0,l._)("div",null,"执行提交时间："+(0,s.zw)(n.detail.farmRecordBo.workTime),1),(0,l._)("div",null,"执行提交人："+(0,s.zw)(n.detail.farmRecordBo.userName),1),(0,l._)("div",M,[(0,l._)("div",null,[(0,l._)("p",G,(0,s.zw)(n.detail.farmRecordBo.title),1),(0,l._)("p",null,(0,s.zw)(n.detail.farmRecordBo.workTime),1)]),(0,l._)("div",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.detail.farmRecordBo.farmUseBos,(e=>((0,l.wg)(),(0,l.iD)("p",{class:"u",key:e.id},(0,s.zw)(e.agricultural)+"      "+(0,s.zw)(e.agriculturalCount)+" "+(0,s.zw)(e.agriculturalUnit),1)))),128))]),(0,l._)("div",null,[(0,l._)("p",null,(0,s.zw)(n.detail.farmRecordBo.workText||"无备注"),1),(0,l._)("p",null,(0,s.zw)(n.detail.farmRecordBo.userName),1)])])])):(0,l.kq)("",!0),n.detail.status>1&&e.$store.state.power.checkTaskBtn?((0,l.wg)(),(0,l.iD)("div",K,[A,(0,l._)("div",null,"检查结果："+(0,s.zw)(2==n.detail.status?"合格":"不合格"),1),F,(0,l._)("div",O,[(0,l._)("div",H,(0,s.zw)(n.detail.opinion),1)])])):(0,l.kq)("",!0),n.showTextArea||1!=n.detail.status?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(r,{key:6,onClick:t[1]||(t[1]=e=>n.showTextArea=!0),type:"primary",link:"",style:{"margin-top":"20px"}},{default:(0,l.w5)((()=>[Z,J])),_:1})),n.showTextArea?((0,l.wg)(),(0,l.iD)("div",Q,[E,(0,l._)("div",null,[(0,l._)("div",null,[X,(0,l.Wm)(u,{modelValue:n.isPass,"onUpdate:modelValue":t[2]||(t[2]=e=>n.isPass=e),class:"ml-4"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{label:"2"},{default:(0,l.w5)((()=>[ee])),_:1}),(0,l.Wm)(d,{label:"3"},{default:(0,l.w5)((()=>[te])),_:1})])),_:1},8,["modelValue"])])]),(0,l._)("div",ae,[le,(0,l.Wm)(c,{modelValue:n.textarea,"onUpdate:modelValue":t[3]||(t[3]=e=>n.textarea=e),rows:5,type:"textarea",placeholder:"输入检查意见"},null,8,["modelValue"])])])):(0,l.kq)("",!0),n.showTextArea?((0,l.wg)(),(0,l.iD)("div",se,[(0,l.Wm)(r,{type:"primary",plain:"",onClick:t[4]||(t[4]=e=>n.showTextArea=!1)},{default:(0,l.w5)((()=>[ie])),_:1}),(0,l.Wm)(r,{type:"primary",onClick:o.submitCheck,loading:n.submitting},{default:(0,l.w5)((()=>[ne])),_:1},8,["onClick","loading"])])):(0,l.kq)("",!0)])),[[m,n.detailLoading]])])),_:1},8,["before-close","modelValue"])])}var re=a(2335),de={name:"taskDetail",props:["id"],data(){return{detailLoading:!1,showDetailBox:!0,detail:{farmRecordBo:{farmUseBos:[]}},showTextArea:!1,textarea:"",isPass:"2",submitting:!1}},mounted(){this.getData()},methods:{view(e){window.open(e)},getData(){this.detailLoading=!0,this.ajax.post("/api/v1/adam/task/taskDetail",{taskId:this.id}).then((e=>{this.detailLoading=!1,e.data.startTime=re.Z.time("y-m-d h:i:s",e.data.startTime),e.data.endTime=re.Z.time("y-m-d h:i:s",e.data.endTime),e.data.createTime=re.Z.time("y-m-d h:i:s",e.data.createTime),e.data.executors=JSON.parse(e.data.executors),e.data.farmRecordBo=e.data.farmRecordBo||{farmUseBos:{}},e.data.farmRecordBo.farmUseBos=e.data.farmRecordBo.farmUseBos||{},this.detail=e.data}))},onClose(e=null){"function"==typeof e&&(e=null),this.$emit("onCloseDetail",e),this.showDetailBox=!1},submitCheck(){this.submitting=!0,this.ajax.post("/api/v1/adam/task/taskCheck",{checkStatus:this.isPass,taskId:this.id,taskOpinion:this.textarea}).then((e=>{this.submitting=!1,this.$message.success("提交成功"),this.onClose(1)}))}}},ue=a(8118);const ce=(0,ue.Z)(de,[["render",oe],["__scopeId","data-v-3991b626"]]);var pe=ce;const me=e=>((0,l.dD)("data-v-651844c0"),e=e(),(0,l.Cn)(),e),he={class:"taskDetail purchaseDetailBox"},ge={class:"taskDetailInner purchaseDetailBoxInner"},we={class:"item"},ke=me((()=>(0,l._)("p",{class:"title"},"园区：",-1))),ve={class:"item"},_e=me((()=>(0,l._)("p",{class:"title"},"作物：",-1))),ye={class:"item"},De=me((()=>(0,l._)("p",{class:"title"},"具体内容：",-1))),fe={class:"item"},xe=me((()=>(0,l._)("p",{class:"title"},"操作指导：",-1))),be={class:"upload"},Ce=["src"],Te={key:2,class:"uploadBox"},Be={key:1},Ue=me((()=>(0,l._)("i",{class:"erp erpshangchuan"},null,-1))),ze=[Ue],We={key:2},$e={class:"item"},Ve=me((()=>(0,l._)("p",{class:"title"},"执行人：",-1))),Le={class:"item"},Ie=me((()=>(0,l._)("p",{class:"title"},"开始时间：",-1))),Pe={class:"item"},je=me((()=>(0,l._)("p",{class:"title"},"截止时间：",-1))),qe={class:"btns"},Ne=(0,l.Uk)("取消"),Se=(0,l.Uk)("确定");function Ye(e,t,a,s,i,n){const o=(0,l.up)("el-option"),r=(0,l.up)("el-select"),d=(0,l.up)("el-input"),u=(0,l.up)("el-progress"),c=(0,l.up)("el-date-picker"),p=(0,l.up)("el-button"),m=(0,l.up)("el-dialog"),h=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",he,[(0,l.Wm)(m,{"custom-class":"taskDetail purchaseDetailBox","before-close":n.onClose,"append-to-body":"",modelValue:i.showDetailBox,"onUpdate:modelValue":t[8]||(t[8]=e=>i.showDetailBox=e),title:"创建任务",width:"700px"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",ge,[(0,l._)("div",we,[ke,(0,l.Wm)(r,{modelValue:i.selectedGarden,"onUpdate:modelValue":t[0]||(t[0]=e=>i.selectedGarden=e),style:{width:"650px"},class:"m-2",placeholder:"请选择园区"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.gardenList,((e,t)=>((0,l.wg)(),(0,l.j4)(o,{key:t,label:e.title,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,l._)("div",ve,[_e,(0,l.Wm)(r,{modelValue:i.selectedPlant,"onUpdate:modelValue":t[1]||(t[1]=e=>i.selectedPlant=e),multiple:"",style:{width:"650px"},class:"m-2",placeholder:"请选择作物"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.plantList,((e,t)=>((0,l.wg)(),(0,l.j4)(o,{key:t,label:e.categoryTitle+"-"+e.address,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,l._)("div",ye,[De,(0,l.Wm)(d,{modelValue:i.taskContent,"onUpdate:modelValue":t[2]||(t[2]=e=>i.taskContent=e),style:{width:"650px"},placeholder:"请输入内容"},null,8,["modelValue"])]),(0,l._)("div",fe,[xe,(0,l._)("div",be,[i.video?((0,l.wg)(),(0,l.iD)("video",{key:0,controls:"",src:i.video,alt:""},null,8,Ce)):(0,l.kq)("",!0),i.video?((0,l.wg)(),(0,l.iD)("i",{key:1,class:"erp erpguanbi",onClick:t[3]||(t[3]=e=>i.video="")})):(0,l.kq)("",!0),i.video?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Te,[i.uploading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("input",{key:0,onChange:t[4]||(t[4]=(...e)=>n.uploadFile&&n.uploadFile(...e)),ref:"file",type:"file"},null,544)),i.uploading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("p",Be,ze)),i.uploading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("p",We,"点击上传视频")),i.uploading?((0,l.wg)(),(0,l.j4)(u,{key:3,width:90,type:"circle",percentage:i.percentage},null,8,["percentage"])):(0,l.kq)("",!0)]))])]),(0,l._)("div",$e,[Ve,(0,l.Wm)(r,{modelValue:i.selectedUser,"onUpdate:modelValue":t[5]||(t[5]=e=>i.selectedUser=e),multiple:"",style:{width:"650px"},class:"m-2",placeholder:"请选择执行人"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.userlist,((e,t)=>((0,l.wg)(),(0,l.j4)(o,{key:t,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,l._)("div",Le,[Ie,(0,l.Wm)(c,{"value-format":"YYYY-MM-DD",style:{width:"650px"},modelValue:i.startTime,"onUpdate:modelValue":t[6]||(t[6]=e=>i.startTime=e),type:"date",placeholder:"请选择开始时间"},null,8,["modelValue"])]),(0,l._)("div",Pe,[je,(0,l.Wm)(c,{style:{width:"650px"},"value-format":"YYYY-MM-DD",modelValue:i.endTime,"onUpdate:modelValue":t[7]||(t[7]=e=>i.endTime=e),type:"date",placeholder:"请选择截止时间"},null,8,["modelValue"])])])),[[h,i.detailLoading]]),(0,l._)("div",qe,[(0,l.Wm)(p,{plain:"",onClick:n.onClose},{default:(0,l.w5)((()=>[Ne])),_:1},8,["onClick"]),(0,l.Wm)(p,{type:"primary",onClick:n.submit,loading:i.submitting},{default:(0,l.w5)((()=>[Se])),_:1},8,["onClick","loading"])])])),_:1},8,["before-close","modelValue"])])}var Re=a(3483),Me={name:"taskDetail",props:["id"],data(){return{detailLoading:!1,showDetailBox:!0,detail:"",showTextArea:!1,textarea:"",isPass:"1",selectedGarden:"",selectedPlant:[],selectedUser:[],gardenList:[],plantList:[],userlist:[],taskContent:"",startTime:"",endTime:"",video:"",uploading:!1,percentage:0,searchCropLoading:!1,submitting:!1}},mounted(){let e=this,t=async function(){await e.getGardenList(),await e.getUserlist()};t()},watch:{selectedGarden(){this.plantList=[],this.selectedPlant="",this.ajax.post("/api/v1/adam/task/getPlantsByGarden",{gardenId:this.selectedGarden}).then((e=>{console.log(e.data),this.plantList=e.data}))}},methods:{getGardenList(){return new Promise(((e,t)=>{this.ajax.post("/api/v1/adam/garden/list",{pageNum:1,pageSize:100,param:{}}).then((t=>{this.gardenList=t.data,e()}))}))},getUserlist(){return new Promise(((e,t)=>{this.ajax.post("/api/v1/adam/task/getOrganizationUsers",{pageNum:1,pageSize:100,param:{}}).then((t=>{this.userlist=t.data,e()}))}))},onClose(e=null){"function"==typeof e&&(e=null),this.$emit("onCloseCreate",e),this.showDetailBox=!1},uploadFile(){this.uploading=!0;let e=this.$refs.file.files[0];(0,Re.Z)(e,`erp/park/${e.name}`).then((e=>{e.url&&(this.video=e.url,this.uploading=!1,this.percentage=0)}))},searchCrop(){},submit(){let e="";if(this.gardenList.map((t=>{t.id==this.selectedGarden&&(e=t.title)})),!this.selectedGarden)return void this.$message.warning("请选择园区");if(0==this.selectedPlant.length)return void this.$message.warning("请选择作物");if(!this.taskContent)return void this.$message.warning("请输入具体内容");if(0==this.selectedUser.length)return void this.$message.warning("请选择执行人");if(!this.startTime)return void this.$message.warning("请选择开始时间");if(!this.endTime)return void this.$message.warning("请选择截止时间");let t=this.selectedUser.map((e=>{let t={id:"",name:""};return this.userlist.map((a=>{e==a.id&&(t.id=a.id,t.name=a.name)})),t}));this.submitting=!0,this.ajax.post("/api/v1/adam/task/createTask",{endTime:this.endTime,executors:JSON.stringify(t),gardenId:this.selectedGarden,gardenTitle:e,growPlants:this.selectedPlant,opinion:"",reWire:this.video,startTime:this.startTime,taskContent:this.taskContent}).then((e=>{this.submitting=!1,200==e.code&&1==e.data?(this.onClose(1),this.showDetailBox=!1):this.$message.error(e.message)}))}}};const Ge=(0,ue.Z)(Me,[["render",Ye],["__scopeId","data-v-651844c0"]]);var Ke=Ge,Ae={name:"task",data(){return{status:[{title:"全部",value:"-1",sup:0},{title:"待执行",value:"0",sup:0},{title:"待检查",value:"1",sup:0},{title:"合格",value:"2",sup:0},{title:"不合格",value:"3",sup:0}],loading:!1,currentStatus:"-1",searchKey:"",searchLoading:!1,list:[],currentPage:1,pageSize:10,total:0,showDetailBox:!1,showCreateBox:!1,currentId:""}},components:{TaskDetail:pe,TaskCreate:Ke},mounted(){this.getData(),this.getStatus_1()},methods:{statusClick(e){this.currentStatus=e,this.getData()},getStatus_1(){this.ajax.post("/api/v1/adam/task/manageTaskList",{pageNum:this.currentPage,pageSize:10,param:{gardenId:"",growPlantId:"",status:1,keyWord:""}}).then((e=>{this.status[2].sup=e.total}))},getData(){this.loading=!0,this.ajax.post("/api/v1/adam/task/manageTaskList",{pageNum:this.currentPage,pageSize:10,param:{gardenId:-1,growPlantId:-1,status:this.currentStatus,keyWord:this.searchKey}}).then((e=>{this.list=e.data.map((e=>{switch(e.executors=JSON.parse(e.executors),e.status){case 0:e.statusText="待执行",e.color="#A8A8A8";break;case 1:e.statusText="待检查",e.color="#1890FF";break;case 2:e.statusText="合格",e.color="#0DD71C";break;case 3:e.statusText="不合格",e.color="#FF4949";break}return e})),this.total=e.total,this.loading=!1}))},showDetail(e){this.currentId=e,this.showDetailBox=!0},onCloseDetail(e){1==e&&this.getData();let t=setTimeout((()=>{this.showDetailBox=!1,clearTimeout(t)}),500)},onCloseCreate(e){1==e&&this.getData(),console.log(e);let t=setTimeout((()=>{this.showCreateBox=!1,clearTimeout(t)}),500)}}};const Fe=(0,ue.Z)(Ae,[["render",y],["__scopeId","data-v-79fbbd7c"]]);var Oe=Fe},2335:function(e,t){const a={to2:e=>Number(e)<10?`0${Number(e)}`:String(e),time(e="y-m-d",t=null){let a=t?new Date(t):new Date;return e=e.replace("y",a.getFullYear()),e=e.replace("m",this.to2(a.getMonth()+1)),e=e.replace("d",this.to2(a.getDate())),e=e.replace("h",this.to2(a.getHours())),e=e.replace("i",this.to2(a.getMinutes())),e=e.replace("s",this.to2(a.getSeconds())),e=e.replace("w",a.getDay()),e},monthLength(e=null){let t=1*this.time("y",e),a=this.to2(1*this.time("m",e)+1);if(13==a)return 31;{let e=new Date(`${t}-${a}-01`).getTime()-864e5;return Number(this.time("d",e))}},preMonthLenggth(e=null){let t=1*this.time("y",e),a=this.to2(1*this.time("m",e)),l=new Date(`${t}-${a}-01`).getTime()-864e5;return Number(this.time("d",l))},nextMonthLenggth(e=null){let t=1*this.time("y",e),a=this.to2(1*this.time("m",e)+2),l=new Date(`${t}-${a}-01`).getTime()-864e5;return Number(this.time("d",l))},monthFirst(e=null){let t=this.time("y-m",e)+"-01";return this.time("y-m-d",t)},monthLast(e=null){let t=1*this.time("y",e),a=this.to2(1*this.time("m",e)+1),l=new Date(`${t}-${a}-01`).getTime()-864e5;return this.time("y-m-d",l)},preMonthToday(e=null){let t=Number(e.substr(0,4)),a=Number(e.substr(5,2)),l=Number(e.substr(8));return l>this.preMonthLenggth(`{y}-${a}-01`)&&(l=this.preMonthLenggth(`{y}-${a}-01`)),1==a?(t-=1,a=12):a-=1,`${t}-${a}-${l}`},nextMonthToday(e=null){let t=Number(e.substr(0,4)),a=Number(e.substr(5,2)),l=Number(e.substr(8));return l>this.nextMonthLenggth(`{y}-${a}-01`)&&(l=this.nextMonthLenggth(`{y}-${a}-01`)),12==a?(t+=1,a=1):a+=1,`${t}-${a}-${l}`},timeout(e){},timeRemaining(e,t){return t-=parseInt((new Date).getTime()/1e3),this.unixToString(e,t)},unixToString(e,t){let l=parseInt(t/60/60/24),s=parseInt((t-86400*l)/3600),i=parseInt((t-86400*l-3600*s)/60),n=t-86400*l-3600*s-60*i;return e=e.replace("d",a.to2(a.low(l))),e=e.replace("h",a.to2(a.low(s))),e=e.replace("i",a.to2(a.low(i))),e=e.replace("s",a.to2(a.low(n))),e},low(e){return e<0?0:e},parse(e){return new Date(e)}};t["Z"]=a},8090:function(e,t,a){e.exports=a.p+"img/0.b107b999.png"},7795:function(e,t,a){e.exports=a.p+"img/1.a4a41189.png"},7913:function(e,t,a){e.exports=a.p+"img/2.16b2581e.png"},9536:function(e,t,a){e.exports=a.p+"img/3.6bfbb5bf.png"}}]);
//# sourceMappingURL=154.793c9327.js.map